# 设计模式篇

在软件工程中，设计模式（design pattern）是对软件设计中普遍存在（反复出现）的各种问题，所提出的解决方案。
最初从建筑行业引入。

24 种设计模式有三种分类：创建型模式、结构型模式、行为型模式。

- 创建型模式：对类的实例化过程进行了抽象，能够将软件模块中对象的创建和对象的使用分离。
    - （6 种）简单工厂模式、工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式
- 结构型模式：关注于对象的组成以及对象之间的依赖关系，描述如何将类或者对象结合在一起形成更大的结构
    - （7 种）适配器模式、装饰者模式、代理模式、外观模式、桥接模式、组合模式、享元模式
- 行为型模式：关注于对象的行为问题，是对在不同的对象之间划分责任和算法的抽象化；不仅仅关注类和对象的结构，而且重点关注它们之间的相互作用
    - （11 种）策略模式、模板方法模式、观察者模式、迭代器模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式

## 创建型模式

### 1. 简单工厂模式

简单工厂模式（Factory Pattern）是 Java 中最常用的设计模式之一。

**核心**：一个工厂类生产一类产品，这类产品都实现了同一个产品接口。

Go 语言没有 Java/Python 中的构造函数概念（也就没有工厂类概念），一般都是定义 `NewXXX` 函数来初始化相关产品或类。 `NewXXX`
函数返回接口时就是简单工厂模式。

示例：[dp_simplefactory.go](tests/dp_simplefactory.go)

### 2. 工厂方法模式

工厂方法模式（Factory Method Pattern）是简单工厂模式的进一步抽象。

**核心**：一个工厂接口+多个工厂类，每个工厂类负责生产一类产品。

示例：[dp_factorymethod.go](tests/dp_factorymethod.go)

> [!NOTE]
> 工厂方法模式比简单工厂模式多了一个工厂接口。

### 3. 抽象工厂模式

在简单工厂和工厂方法模式中，我们都只需生产一类产品，比如只生产（各种品牌的）电池。
但有时候，我们需要生产多类（有关联的）产品，它们属于不同产品线，比如需要生产（各种品牌的）电池和屏幕。
此时，抽象工厂模式就可以派上用场了。

在抽象工厂模式中，首先有一个超级工厂接口，它可以生产多个产品线的工厂类，然后产出的这些工厂类再生产出对应的产品。

例如有一个生产电池和屏幕的超级工厂接口，具体的超级工厂可以是三星超级工厂、小米超级工厂等。
一个三星超级工厂拥有生产三星牌电池和屏幕的产品线，一个小米超级工厂拥有生产小米牌电池和屏幕的产品线。

**核心**： 一个超级工厂接口+多个子工厂类，每个子工厂类生产一类产品，即整个超级工厂拥有多个产品线。

示例：[dp_abstractfactory.go](tests/dp_abstractfactory.go)

> [!NOTE]
> 有关联的产品是因为这些产品都来自一个超级工厂，一个三星工厂不会同时生产手机和鸡翅。

### 4. 建造者模式

建造者模式（Builder Pattern）使用多个简单的对象一步一步构建成一个复杂的对象。
此模式通常有一个叫做`*Builder`的类负责创建复杂对象的各个部分，它可选的提供一个类 `Setter` 方法来构造对象的每个部分。

**核心**：通过一个 `*Build` 类来逐步构建一个复杂对象。

示例：[dp_builder.go](tests/dp_builder.go)

### 5. 原型模式

### 6. 单例模式
