# 设计模式篇

在软件工程中，设计模式（design pattern）是对软件设计中普遍存在（反复出现）的各种问题，所提出的解决方案。
最初从建筑行业引入。

24 种设计模式有三种分类：创建型模式、结构型模式、行为型模式。

- 创建型模式：对类的实例化过程进行了抽象，能够将软件模块中对象的创建和对象的使用分离。
    - （6 种）简单工厂模式、工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式
- 结构型模式：关注于对象的组成以及对象之间的依赖关系，描述如何将类或者对象结合在一起形成更大的结构
    - （7 种）适配器模式、装饰者模式、代理模式、外观模式、桥接模式、组合模式、享元模式
- 行为型模式：关注于对象的行为问题，是对在不同的对象之间划分责任和算法的抽象化；不仅仅关注类和对象的结构，而且重点关注它们之间的相互作用
    - （11 种）策略模式、模板方法模式、观察者模式、迭代器模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式

## 创建型模式

### 1. 简单工厂模式

简单工厂模式（Factory Pattern）是 Java 中最常用的设计模式之一。

**核心**：一个工厂类生产一类产品，这类产品都实现了同一个产品接口。

Go 语言没有 Java/Python 中的构造函数概念（也就没有工厂类概念），一般都是定义 `NewXXX` 函数来初始化相关产品或类。 `NewXXX`
函数返回接口时就是简单工厂模式。

示例：[dp_simplefactory.go](tests/dp_simplefactory.go)

### 2. 工厂方法模式

工厂方法模式（Factory Method Pattern）是简单工厂模式的进一步抽象。

**核心**：一个工厂接口+多个工厂类，每个工厂类负责生产一类产品。

示例：[dp_factorymethod.go](tests/dp_factorymethod.go)

> [!NOTE]
> 工厂方法模式比简单工厂模式多了一个工厂接口。

### 3. 抽象工厂模式

在简单工厂模式中，一个工厂只产出一个产品，而抽象工厂模式中，一个工厂可以生产多个产品，例如一个三星工厂可以生产三星牌的电池和屏幕，
同理，一个小米工厂可以生产小米牌的电池和屏幕。

那么这里的抽象工厂模式，就是先定义一个抽象工厂接口（产出多个工厂类），然后定义多个工厂接口（产出多个产品）。
一个抽象工厂接口产出的多个工厂类是有关联的，这些工厂类将会产出一个**产品族**内的多个产品。

**核心**： 一个工厂接口+多个工厂类，每个工厂类生产多类产品，即拥有多个产品线。

示例：[dp_abstractfactory.go](tests/dp_abstractfactory.go)

> [!NOTE]
> 产品族是指一组有共同关联的产品，比如同一个品牌的电池工厂和屏幕工厂生产的产品都关联这个品牌。

